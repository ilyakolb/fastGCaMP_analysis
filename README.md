# GECI meta-analysis and plot generation

Plots kerr plots and analyzes results generated by the NAA GECI analysis code. Allows for spot-checking raw image data and movies.

## Author

Ilya Kolb  
Janelia Research Campus  
Howard Hughes Medical Institute  
kolbi@janelia.hhmi.org  

## Dependencies

This code is dependent on outputs from the [NAA_analysis](https://github.com/ilyakolb/NAA_analysis) workflow, namely, the Excel spreadsheets such as `data_week_XXXXXXX_GCaMP96uf_raw_GCaMP96uf.xlsx` and compiled data such as  `pile_week_GCaMP96uf_upto_20200310_GCaMP96uf_raw.mat`

## Requirements

* MATLAB 2019a+
* Access to dm11:/genie/GECIScreenData/Analysis (analyzed data from GECI screen)
* Fiji (if running from the script)

## Installation
1. Download the `fastGCaMP_analysis` directory to your computer
2. Add `fastGCaMP_analysis/accessory_funcs` to MATLAB path

## Usage

1. Open `kerr_plot_CGaMP96uf.m` in MATLAB. Set the `good` variable to point to the `data_all` or `data_week` xlsx file e.g. in `dm11:\GECIScreenData\Analysis`
2. Set the variables to plot (`xToPlot`, `yToPlot`, etc) according to the field names in the `good` table
3. To plot averaged traces of hit constructs, run `compare_constructs_GCaMP96uf.m`.

### compare_constructs_GCaMP96uf

* In the 'hits' cell array, put in mutant names you want to look at (e.g. '500.333') 
* In the 'control' field, set the name of the control (e.g. '10.921' for jGCaMP7f)
* Set 'plotRaw' to 1 if you want to plot individual responses from wells in each constructs. Also set numSampleWells to limit how many wells per construct will be plotted.
* Set launchFiji to 1 to automatically launch Fiji from the plotRawCellData script. Only happens if `plotRaw` is set to 1.
* See specific instructions in `compare_constructs_GCaMP96uf.m` for details on other parameters

## Notes

* Remember to set hardcoded directories in `plotRawCellData.m`.
* `launchFiji` can be buggy